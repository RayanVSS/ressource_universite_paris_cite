#include "sys/types.h"
#include "sys/unistd.h"
#include "sys/wait.h"
#include "fcntl.h"
#include "stdlib.h"
#include "stdio.h"

int main(int argc, char const *argv[]){
    int p[2] = {-1 , -1} ; 
    pipe(p); 

    pid_t r = fork() ; 
    switch (r){
    case 0:
        char buff[10] ; 
        if (!read(p[0] , buff , sizeof(char))) {
            perror("error read") ; 
            return EXIT_FAILURE ; 
        }
        printf("j'ai lu %c \nfini de siester\n" , buff[0]) ; 
        return EXIT_SUCCESS;
        break;
    
    default:
        sleep(5) ; 
        if (!write(p[1] , "c" , sizeof(char))) {
            perror("error writing") ; 
            return EXIT_FAILURE ; 
        }
        printf("finished\n") ; 
        wait(NULL);
        return EXIT_SUCCESS;
        break;
    }

    return 0;
}
