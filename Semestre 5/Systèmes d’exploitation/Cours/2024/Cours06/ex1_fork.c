#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>

int main(void){
  int r;

  /* affichage avant le clonage */
  printf("mon pid : %d\n", getpid());

  /* clonage */
  r = fork();

  if (r == -1) {
    perror("fork");
    exit(1);
  }

  /* affichage après le clonage : il y a maintenant 2 processus, donc 2
   * affichages */
  printf("mon pid : %d\tmon père : %d\tretour de fork : %d\n", getpid(), getppid(), r);

  /* pour s'assurer que le père termine après l'affichage du fils */
  sleep(1);
  
  return 0;
}
