#include <signal.h>
#include <sys/types.h>
#include <unistd.h>
#include <string.h>
#include <stdio.h>

static int cpt;

void compteur(int sig) {
  if (sig == SIGTSTP) cpt ++;
  dprintf(STDIN_FILENO, "j'ai reçu %d fois le signal %d\n", cpt, sig);
}

void affiche(int sig) {
  dprintf(STDIN_FILENO, "%d bien reçu, mais je continue\n", sig);
}

int main(void){
  struct sigaction action;
  memset(&action, 0, sizeof(struct sigaction));
  action.sa_handler = SIG_IGN /* affiche */ /* compteur */;

  dprintf(STDERR_FILENO, "processus de pid %d lancé\n", getpid());

  sigaction(SIGTSTP, &action, NULL);
  dprintf(STDERR_FILENO, "sigaction effectué\n");
 
  while(1)
    pause();

}
